@(request: play.api.mvc.RequestHeader, user: securesocial.core.Identity)
@import securesocial.core.IdentityProvider
@import securesocial.core.Registry
@import securesocial.core.providers.UsernamePasswordProvider
@import securesocial.core.AuthenticationMethod._
@import securesocial.core.providers.utils.RoutesHelper

@providerId=@{user.identityId.providerId}

@mails.email("LASU") {
    @mails.emailFormWrapper("You're Already Registered") {
      <div class="information">
        <p>Hello @user.firstName,</p>
        
        @if(providerId.equals("userpass")) {
            <p>You tried to sign up but you already have an account with us.  If you don't remember your password please go
            <a href="@securesocial.core.providers.utils.RoutesHelper.startResetPassword().absoluteURL(IdentityProvider.sslEnabled)(request)">
                here
            </a> to reset it.</p>
        } else {
           <p>You tried to sign up but you have already registered with us.  Click 
            @Registry.providers.get(providerId).map { provider =>
                @if( provider.authMethod == OAuth1 || provider.authMethod == OAuth2 ) {
                    @defining( "securesocial/images/providers/%s.png".format(provider.id) ) { imageUrl =>
                        <a href="@provider.authenticationUrl"> <img src="@RoutesHelper.at(imageUrl)"/></a>
                    }
                }        
            }
             to login.</p>
        } 
      </div>
    }
}
